<section class="xp-part part-dashboard">
  <div data-th-each="item,i : ${dashboard}" class="row" data-th-appendclass="${i.index}  ? 'mt-3'">
    <div class="col-lg-8">
      <h1 data-th-text="${item.displayName} + ' (' + ${dataquery.count} +  ')'"></h1>
      <table class="table  table-bordered table-striped">
        <thead>
          <tr>
            <th class="roboto-bold">Datasett</th>
            <th class="roboto-bold">Sist oppdatert</th>
          </tr>
        </thead>
        <tbody>
          <tr data-th-each="set : ${dataquery.hits}" class="small">
            <td>
              <div class="dataset" data-th-text="${set.displayName}" data-th-classappend="${set.class}"></div>
            </td>
            <td>
              <div data-th-text="${set.updated}"></div>
            </td>
            <td>
              <div data-th-text="${set.updatedHumanReadable}"></div>
            </td>
          </tr>
      </table>
    </div>
  </div>
  <button data-th-attr="data-service=${portal.serviceUrl({'_service=dashboard'})}" class="btn btn-secondary mt-3 js-dashboard-delete pb-2">
    Slett alle dataset
    <span class="d-none ml-1 my-1 spinner-border spinner-border-sm" role="status">
      <span class="sr-only">Sletter...</span>
    </span>
  </button>
  <button data-th-attr="data-service=${portal.serviceUrl({'_service=dashboard'})}" class="btn btn-primary ml-2 mt-3 js-dashboard-update pb-2">
    Oppdater alle dataset
    <span class="d-none ml-1 my-1 spinner-border spinner-border-sm" role="status">
      <span class="sr-only">Loading...</span>
    </span>
  </button>
  <div class="d-none alert alert-success mt-3 update-success">
    Oppdateringen var vellykket.
  </div>
  <div class="d-none alert alert-success mt-3 update-warning">
    Oppdateringen var vellykket.
  </div>
  <div class="d-none alert alert-success mt-3 delete-success">
    Slettingen var vellykket.
  </div>
  <div class="d-none alert alert-warning mt-3 delete-warning">
    Det oppstod en feil under slettingen.
  </div>
</section>
